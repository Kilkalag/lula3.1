<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–û–±—É—á–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—é —É—Ä–∞–≤–Ω–µ–Ω–∏–π –≤—ã—Å—à–∏—Ö —Å—Ç–µ–ø–µ–Ω–µ–π</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .math-equation {
            font-family: 'Times New Roman', Times, serif;
            font-size: 1.5rem;
            font-style: italic;
        }
        .solution-input {
            font-family: 'Times New Roman', Times, serif;
            font-size: 1.2rem;
        }
        .theory-text {
            text-align: left;
            white-space: pre-line;
        }
        .progress-bar {
            transition: width 0.5s ease-in-out;
        }
        .block-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
        }
        .fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <!-- –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é -->
        <div id="main-menu" class="text-center fade-in">
            <h1 class="text-4xl font-bold text-indigo-800 mb-8">–û–±—É—á–µ–Ω–∏–µ —Ä–µ—à–µ–Ω–∏—é —É—Ä–∞–≤–Ω–µ–Ω–∏–π –≤—ã—Å—à–∏—Ö —Å—Ç–µ–ø–µ–Ω–µ–π</h1>
            
            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mt-12">
                <div class="block-card bg-white rounded-xl shadow-md p-6 cursor-pointer transition-all duration-300" onclick="showTheory()">
                    <div class="text-indigo-600 text-5xl mb-4"><i class="fas fa-book-open"></i></div>
                    <h3 class="text-xl font-semibold mb-2">–¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–π –±–ª–æ–∫</h3>
                    <p class="text-gray-600">–ò–∑—É—á–∏—Ç–µ –æ—Å–Ω–æ–≤—ã –∏ –º–µ—Ç–æ–¥—ã —Ä–µ—à–µ–Ω–∏—è —É—Ä–∞–≤–Ω–µ–Ω–∏–π</p>
                </div>
                
                <div class="block-card bg-white rounded-xl shadow-md p-6 cursor-pointer transition-all duration-300" onclick="startBlock(1)">
                    <div class="text-blue-600 text-5xl mb-4"><i class="fas fa-cubes"></i></div>
                    <h3 class="text-xl font-semibold mb-2">–ë–ª–æ–∫ 1: –§–æ—Ä–º—É–ª—ã —Å–æ–∫—Ä–∞—â–µ–Ω–Ω–æ–≥–æ —É–º–Ω–æ–∂–µ–Ω–∏—è</h3>
                    <p class="text-gray-600">10 –∑–∞–¥–∞—á –Ω–∞ —Ä–µ—à–µ–Ω–∏–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–π —Å –ø–æ–º–æ—â—å—é –§–°–£</p>
                </div>
                
                <div class="block-card bg-white rounded-xl shadow-md p-6 cursor-pointer transition-all duration-300" onclick="startBlock(2)">
                    <div class="text-green-600 text-5xl mb-4"><i class="fas fa-layer-group"></i></div>
                    <h3 class="text-xl font-semibold mb-2">–ë–ª–æ–∫ 2: –ú–µ—Ç–æ–¥ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏</h3>
                    <p class="text-gray-600">10 –∑–∞–¥–∞—á –Ω–∞ —Ä–µ—à–µ–Ω–∏–µ –º–µ—Ç–æ–¥–æ–º –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏</p>
                </div>
                
                <div class="block-card bg-white rounded-xl shadow-md p-6 cursor-pointer transition-all duration-300" onclick="startBlock(3)">
                    <div class="text-purple-600 text-5xl mb-4"><i class="fas fa-square-root-alt"></i></div>
                    <h3 class="text-xl font-semibold mb-2">–ë–ª–æ–∫ 3: –¢–µ–æ—Ä–µ–º–∞ –ë–µ–∑—É</h3>
                    <p class="text-gray-600">10 –∑–∞–¥–∞—á —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Ç–µ–æ—Ä–µ–º—ã –ë–µ–∑—É</p>
                </div>
                
                <div class="block-card bg-white rounded-xl shadow-md p-6 cursor-pointer transition-all duration-300" onclick="startBlock(4)">
                    <div class="text-red-600 text-5xl mb-4"><i class="fas fa-project-diagram"></i></div>
                    <h3 class="text-xl font-semibold mb-2">–ë–ª–æ–∫ 4: –°—Ö–µ–º–∞ –ì–æ—Ä–Ω–µ—Ä–∞</h3>
                    <p class="text-gray-600">10 –∑–∞–¥–∞—á –Ω–∞ —Ä–µ—à–µ–Ω–∏–µ –ø–æ —Å—Ö–µ–º–µ –ì–æ—Ä–Ω–µ—Ä–∞</p>
                </div>
                
                <div class="block-card bg-white rounded-xl shadow-md p-6 cursor-pointer transition-all duration-300" onclick="startBlock(5)">
                    <div class="text-yellow-600 text-5xl mb-4"><i class="fas fa-exchange-alt"></i></div>
                    <h3 class="text-xl font-semibold mb-2">–ë–ª–æ–∫ 5: –ó–∞–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π</h3>
                    <p class="text-gray-600">10 –∑–∞–¥–∞—á —Å –∑–∞–º–µ–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π</p>
                </div>
                
                <div class="block-card bg-white rounded-xl shadow-md p-6 cursor-pointer transition-all duration-300" onclick="startBlock(6)">
                    <div class="text-teal-600 text-5xl mb-4"><i class="fas fa-superscript"></i></div>
                    <h3 class="text-xl font-semibold mb-2">–ë–ª–æ–∫ 6: –ë–∏–∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ —É—Ä–∞–≤–Ω–µ–Ω–∏—è</h3>
                    <p class="text-gray-600">10 –±–∏–∫–≤–∞–¥—Ä–∞—Ç–Ω—ã—Ö —É—Ä–∞–≤–Ω–µ–Ω–∏–π</p>
                </div>
            </div>
            
            <div class="mt-12 text-gray-500">
                <p>–í—ã–±–µ—Ä–∏—Ç–µ –±–ª–æ–∫ –¥–ª—è –Ω–∞—á–∞–ª–∞ –æ–±—É—á–µ–Ω–∏—è</p>
            </div>
        </div>
        
        <!-- –¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–π –±–ª–æ–∫ -->
        <div id="theory-block" class="hidden text-left fade-in">
            <div class="bg-white rounded-xl shadow-md p-8">
                <div class="flex justify-between items-center mb-6">
                    <h2 class="text-3xl font-bold text-indigo-800">–¢–µ–æ—Ä–µ—Ç–∏—á–µ—Å–∫–∏–π –±–ª–æ–∫</h2>
                    <button onclick="showMainMenu()" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-2 px-4 rounded-lg transition-colors">
                        <i class="fas fa-arrow-left mr-2"></i>–ù–∞–∑–∞–¥
                    </button>
                </div>
                
                <div class="bg-indigo-50 rounded-lg p-6 mb-8">
                    <h3 class="text-xl font-semibold text-indigo-700 mb-4">–†–µ—à–µ–Ω–∏–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–π –≤—ã—Å—à–∏—Ö —Å—Ç–µ–ø–µ–Ω–µ–π</h3>
                    <div class="theory-text text-gray-700 leading-relaxed">
                        <p class="mb-4"><strong>1. –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ:</strong><br>
                        –£—Ä–∞–≤–Ω–µ–Ω–∏–µ –≤—ã—Å—à–µ–π —Å—Ç–µ–ø–µ–Ω–∏ –∏–º–µ–µ—Ç –≤–∏–¥ P(x) = 0, –≥–¥–µ P(x) ‚Äî –º–Ω–æ–≥–æ—á–ª–µ–Ω —Å—Ç–µ–ø–µ–Ω–∏ n ‚â• 3.<br>
                        –ü—Ä–∏–º–µ—Ä—ã: x¬≥ - 6x¬≤ + 11x - 6 = 0 (–∫—É–±–∏—á–µ—Å–∫–æ–µ), x‚Å¥ - 5x¬≤ + 4 = 0 (–±–∏–∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ).</p>
                        
                        <p class="mb-4"><strong>2. –û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ç–æ–¥—ã —Ä–µ—à–µ–Ω–∏—è:</strong></p>
                        <ul class="list-disc pl-6 mb-4 space-y-2">
                            <li><strong>–†–∞–∑–ª–æ–∂–µ–Ω–∏–µ –Ω–∞ –º–Ω–æ–∂–∏—Ç–µ–ª–∏:</strong> –ò—â–∏—Ç–µ –æ–±—â–∏–µ –º–Ω–æ–∂–∏—Ç–µ–ª–∏ –∏–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ñ–æ—Ä–º—É–ª—ã —Å–æ–∫—Ä–∞—â–µ–Ω–Ω–æ–≥–æ —É–º–Ω–æ–∂–µ–Ω–∏—è.</li>
                            <li><strong>–ú–µ—Ç–æ–¥ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏:</strong> –ì—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ —Å–ª–∞–≥–∞–µ–º—ã–µ –¥–ª—è –≤—ã–Ω–µ—Å–µ–Ω–∏—è –æ–±—â–µ–≥–æ –º–Ω–æ–∂–∏—Ç–µ–ª—è.</li>
                            <li><strong>–°—Ö–µ–º–∞ –ì–æ—Ä–Ω–µ—Ä–∞:</strong> –ü–æ–∑–≤–æ–ª—è–µ—Ç –¥–µ–ª–∏—Ç—å –º–Ω–æ–≥–æ—á–ª–µ–Ω –Ω–∞ (x - c) –∏ –Ω–∞—Ö–æ–¥–∏—Ç—å –∫–æ—Ä–Ω–∏.</li>
                            <li><strong>–¢–µ–æ—Ä–µ–º–∞ –ë–µ–∑—É:</strong> –ï—Å–ª–∏ a ‚Äî –∫–æ—Ä–µ–Ω—å, —Ç–æ P(x) –¥–µ–ª–∏—Ç—Å—è –Ω–∞ (x - a) –±–µ–∑ –æ—Å—Ç–∞—Ç–∫–∞.</li>
                            <li><strong>–ú–µ—Ç–æ–¥ –∑–∞–º–µ–Ω—ã:</strong> –ó–∞–º–µ–Ω—è–π—Ç–µ —á–∞—Å—Ç—å —É—Ä–∞–≤–Ω–µ–Ω–∏—è –Ω–æ–≤–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, x¬≤ = t).</li>
                        </ul>
                        
                        <p class="mb-4"><strong>3. –ü—Ä–∏–º–µ—Ä —Ä–µ—à–µ–Ω–∏—è:</strong><br>
                        –£—Ä–∞–≤–Ω–µ–Ω–∏–µ: <span class="math-equation">x¬≥ - 6x¬≤ + 11x - 6 = 0</span><br>
                        - –ü–æ —Ç–µ–æ—Ä–µ–º–µ –ë–µ–∑—É: x = 1 ‚Äî –∫–æ—Ä–µ–Ω—å.<br>
                        - –î–µ–ª–∏–º –º–Ω–æ–≥–æ—á–ª–µ–Ω –Ω–∞ (x - 1): –ø–æ–ª—É—á–∞–µ–º –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ.<br>
                        - –†–µ—à–∞–µ–º –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ: x = 2, x = 3.<br>
                        <strong>–û—Ç–≤–µ—Ç:</strong> x ‚àà {1, 2, 3}.</p>
                    </div>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-white border border-blue-100 rounded-lg p-6">
                        <h4 class="text-lg font-semibold text-blue-700 mb-3">–§–æ—Ä–º—É–ª—ã —Å–æ–∫—Ä–∞—â–µ–Ω–Ω–æ–≥–æ —É–º–Ω–æ–∂–µ–Ω–∏—è</h4>
                        <ul class="space-y-2 text-gray-700">
                            <li><span class="math-equation">(a ¬± b)¬≤ = a¬≤ ¬± 2ab + b¬≤</span></li>
                            <li><span class="math-equation">a¬≤ - b¬≤ = (a - b)(a + b)</span></li>
                            <li><span class="math-equation">(a ¬± b)¬≥ = a¬≥ ¬± 3a¬≤b + 3ab¬≤ ¬± b¬≥</span></li>
                            <li><span class="math-equation">a¬≥ ¬± b¬≥ = (a ¬± b)(a¬≤ ‚àì ab + b¬≤)</span></li>
                        </ul>
                    </div>
                    
                    <div class="bg-white border border-green-100 rounded-lg p-6">
                        <h4 class="text-lg font-semibold text-green-700 mb-3">–¢–µ–æ—Ä–µ–º–∞ –ë–µ–∑—É</h4>
                        <p class="text-gray-700 mb-2">–û—Å—Ç–∞—Ç–æ–∫ –æ—Ç –¥–µ–ª–µ–Ω–∏—è –º–Ω–æ–≥–æ—á–ª–µ–Ω–∞ P(x) –Ω–∞ (x - c) —Ä–∞–≤–µ–Ω P(c).</p>
                        <p class="text-gray-700">–ï—Å–ª–∏ P(c) = 0, —Ç–æ c ‚Äî –∫–æ—Ä–µ–Ω—å –º–Ω–æ–≥–æ—á–ª–µ–Ω–∞.</p>
                    </div>
                    
                    <div class="bg-white border border-purple-100 rounded-lg p-6">
                        <h4 class="text-lg font-semibold text-purple-700 mb-3">–°—Ö–µ–º–∞ –ì–æ—Ä–Ω–µ—Ä–∞</h4>
                        <p class="text-gray-700">–ú–µ—Ç–æ–¥ –¥–µ–ª–µ–Ω–∏—è –º–Ω–æ–≥–æ—á–ª–µ–Ω–∞ –Ω–∞ (x - c) —Å –ø–æ–º–æ—â—å—é —Ç–∞–±–ª–∏—Ü—ã –∫–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç–æ–≤.</p>
                    </div>
                    
                    <div class="bg-white border border-red-100 rounded-lg p-6">
                        <h4 class="text-lg font-semibold text-red-700 mb-3">–ë–∏–∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ —É—Ä–∞–≤–Ω–µ–Ω–∏—è</h4>
                        <p class="text-gray-700">–£—Ä–∞–≤–Ω–µ–Ω–∏—è –≤–∏–¥–∞ <span class="math-equation">ax‚Å¥ + bx¬≤ + c = 0</span></p>
                        <p class="text-gray-700">–†–µ—à–∞—é—Ç—Å—è –∑–∞–º–µ–Ω–æ–π <span class="math-equation">t = x¬≤</span></p>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –ë–ª–æ–∫ —Å –∑–∞–¥–∞—á–∞–º–∏ -->
        <div id="task-block" class="hidden fade-in">
            <div class="bg-white rounded-xl shadow-md p-8">
                <div class="flex justify-between items-center mb-6">
                    <div>
                        <h2 id="block-title" class="text-3xl font-bold text-indigo-800"></h2>
                        <p id="task-counter" class="text-gray-600 mt-1"></p>
                    </div>
                    <button onclick="showMainMenu()" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-2 px-4 rounded-lg transition-colors">
                        <i class="fas fa-arrow-left mr-2"></i>–ù–∞–∑–∞–¥
                    </button>
                </div>
                
                <div class="mb-6">
                    <div class="flex justify-between mb-1">
                        <span class="text-sm font-medium text-indigo-700">–ü—Ä–æ–≥—Ä–µ—Å—Å</span>
                        <span id="progress-percent" class="text-sm font-medium text-indigo-700">0%</span>
                    </div>
                    <div class="w-full bg-gray-200 rounded-full h-2.5">
                        <div id="progress-bar" class="bg-indigo-600 h-2.5 rounded-full progress-bar" style="width: 0%"></div>
                    </div>
                </div>
                
                <div class="bg-indigo-50 rounded-lg p-6 mb-8">
                    <h3 class="text-xl font-semibold text-indigo-700 mb-4">–†–µ—à–∏—Ç–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ:</h3>
                    <div id="equation" class="math-equation text-2xl text-center my-8"></div>
                    
                    <div class="mb-6">
                        <label for="answer-input" class="block text-sm font-medium text-gray-700 mb-2">–í–≤–µ–¥–∏—Ç–µ –∫–æ—Ä–Ω–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–Ω–∞–ø—Ä–∏–º–µ—Ä: 1, -2, 3)</label>
                        <input type="text" id="answer-input" class="solution-input w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500">
                    </div>
                    
                    <div class="flex flex-wrap gap-4">
                        <button onclick="checkAnswer()" class="flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors">
                            <i class="fas fa-check mr-2"></i>–ü—Ä–æ–≤–µ—Ä–∏—Ç—å
                        </button>
                        <button onclick="showHint()" class="flex-1 bg-yellow-500 hover:bg-yellow-600 text-white font-semibold py-3 px-6 rounded-lg transition-colors">
                            <i class="fas fa-lightbulb mr-2"></i>–ü–æ–¥—Å–∫–∞–∑–∫–∞
                        </button>
                    </div>
                </div>
                
                <div id="hint-area" class="hidden bg-yellow-50 border-l-4 border-yellow-400 p-4 mb-6">
                    <div class="flex">
                        <div class="flex-shrink-0 text-yellow-500">
                            <i class="fas fa-info-circle text-xl"></i>
                        </div>
                        <div class="ml-3">
                            <h3 class="text-sm font-medium text-yellow-800">–ü–æ–¥—Å–∫–∞–∑–∫–∞</h3>
                            <div id="hint-content" class="mt-2 text-sm text-yellow-700"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- –†–µ–∑—É–ª—å—Ç–∞—Ç—ã -->
        <div id="results-block" class="hidden fade-in">
            <div class="bg-white rounded-xl shadow-md p-8 text-center">
                <div class="mb-8">
                    <h2 class="text-3xl font-bold text-indigo-800 mb-2">–†–µ–∑—É–ª—å—Ç–∞—Ç—ã</h2>
                    <p class="text-gray-600">–í—ã –∑–∞–≤–µ—Ä—à–∏–ª–∏ –±–ª–æ–∫ –∑–∞–¥–∞—á</p>
                </div>
                
                <div class="bg-indigo-50 rounded-lg p-8 mb-8 max-w-md mx-auto">
                    <div id="result-icon" class="text-6xl mb-4">üòä</div>
                    <h3 id="result-title" class="text-2xl font-semibold mb-2">–•–æ—Ä–æ—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç!</h3>
                    <p id="result-text" class="text-gray-700 mb-6">–í—ã —Ä–µ—à–∏–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ 7 –∏–∑ 10 –∑–∞–¥–∞—á</p>
                    
                    <div class="w-full bg-gray-200 rounded-full h-4 mb-6">
                        <div id="result-progress" class="bg-green-500 h-4 rounded-full progress-bar" style="width: 70%"></div>
                    </div>
                    
                    <div class="flex justify-between text-sm text-gray-600">
                        <span>0%</span>
                        <span>50%</span>
                        <span>100%</span>
                    </div>
                </div>
                
                <div class="flex flex-wrap justify-center gap-4">
                    <button onclick="restartBlock()" class="bg-indigo-600 hover:bg-indigo-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors">
                        <i class="fas fa-redo mr-2"></i>–ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å —Å–Ω–æ–≤–∞
                    </button>
                    <button onclick="showMainMenu()" class="bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-3 px-6 rounded-lg transition-colors">
                        <i class="fas fa-home mr-2"></i>–ù–∞ –≥–ª–∞–≤–Ω—É—é
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // –°–æ—Å—Ç–æ—è–Ω–∏–µ –∏–≥—Ä—ã
        const gameState = {
            currentBlock: 0,
            currentTask: 0,
            score: 0,
            tasks: [],
            blockTitles: {
                1: "–§–æ—Ä–º—É–ª—ã —Å–æ–∫—Ä–∞—â–µ–Ω–Ω–æ–≥–æ —É–º–Ω–æ–∂–µ–Ω–∏—è",
                2: "–ú–µ—Ç–æ–¥ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏",
                3: "–¢–µ–æ—Ä–µ–º–∞ –ë–µ–∑—É",
                4: "–°—Ö–µ–º–∞ –ì–æ—Ä–Ω–µ—Ä–∞",
                5: "–ó–∞–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π",
                6: "–ë–∏–∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ —É—Ä–∞–≤–Ω–µ–Ω–∏—è"
            },
            blockHints: {
                1: "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–æ—Ä–º—É–ª—ã —Å–æ–∫—Ä–∞—â–µ–Ω–Ω–æ–≥–æ —É–º–Ω–æ–∂–µ–Ω–∏—è: —Ä–∞–∑–Ω–æ—Å—Ç—å –∫–≤–∞–¥—Ä–∞—Ç–æ–≤, –∫–≤–∞–¥—Ä–∞—Ç —Å—É–º–º—ã/—Ä–∞–∑–Ω–æ—Å—Ç–∏, —Ä–∞–∑–Ω–æ—Å—Ç—å –∫—É–±–æ–≤.",
                2: "–°–≥—Ä—É–ø–ø–∏—Ä—É–π—Ç–µ —Å–ª–∞–≥–∞–µ–º—ã–µ —Ç–∞–∫, —á—Ç–æ–±—ã –º–æ–∂–Ω–æ –±—ã–ª–æ –≤—ã–Ω–µ—Å—Ç–∏ –æ–±—â–∏–π –º–Ω–æ–∂–∏—Ç–µ–ª—å –∑–∞ —Å–∫–æ–±–∫–∏.",
                3: "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–¥—Å—Ç–∞–≤–∏—Ç—å –¥–µ–ª–∏—Ç–µ–ª–∏ —Å–≤–æ–±–æ–¥–Ω–æ–≥–æ —á–ª–µ–Ω–∞ –≤ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ (—Ç–µ–æ—Ä–µ–º–∞ –ë–µ–∑—É).",
                4: "–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å—Ö–µ–º—É –ì–æ—Ä–Ω–µ—Ä–∞ –¥–ª—è –¥–µ–ª–µ–Ω–∏—è –º–Ω–æ–≥–æ—á–ª–µ–Ω–∞ –Ω–∞ (x - c), –≥–¥–µ c ‚Äî –ø—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ–º—ã–π –∫–æ—Ä–µ–Ω—å.",
                5: "–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–º–µ–Ω–∏—Ç—å —á–∞—Å—Ç—å —É—Ä–∞–≤–Ω–µ–Ω–∏—è –Ω–æ–≤–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π (–Ω–∞–ø—Ä–∏–º–µ—Ä, x¬≤ = t).",
                6: "–°–¥–µ–ª–∞–π—Ç–µ –∑–∞–º–µ–Ω—É –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π t = x¬≤, —Ä–µ—à–∏—Ç–µ –∫–≤–∞–¥—Ä–∞—Ç–Ω–æ–µ —É—Ä–∞–≤–Ω–µ–Ω–∏–µ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ t, –∑–∞—Ç–µ–º –Ω–∞–π–¥–∏—Ç–µ x."
            }
        };

        // –ü–æ–∫–∞–∑–∞—Ç—å –≥–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é
        function showMainMenu() {
            document.getElementById('main-menu').classList.remove('hidden');
            document.getElementById('theory-block').classList.add('hidden');
            document.getElementById('task-block').classList.add('hidden');
            document.getElementById('results-block').classList.add('hidden');
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–æ—Ä–∏—é
        function showTheory() {
            document.getElementById('main-menu').classList.add('hidden');
            document.getElementById('theory-block').classList.remove('hidden');
        }

        // –ù–∞—á–∞—Ç—å –±–ª–æ–∫ –∑–∞–¥–∞—á
        function startBlock(blockNum) {
            gameState.currentBlock = blockNum;
            gameState.currentTask = 0;
            gameState.score = 0;
            generateTasks(blockNum);
            showTask();
            
            document.getElementById('main-menu').classList.add('hidden');
            document.getElementById('task-block').classList.remove('hidden');
            document.getElementById('hint-area').classList.add('hidden');
            
            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≥–æ–ª–æ–≤–∫–∞ –±–ª–æ–∫–∞
            document.getElementById('block-title').textContent = `–ë–ª–æ–∫ ${blockNum}: ${gameState.blockTitles[blockNum]}`;
        }

        // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∑–∞–¥–∞—á –¥–ª—è –±–ª–æ–∫–∞
        function generateTasks(blockNum) {
            gameState.tasks = [];
            
            // –ì–µ–Ω–µ—Ä–∞—Ü–∏—è 10 –∑–∞–¥–∞—á –¥–ª—è –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –±–ª–æ–∫–∞
            for (let i = 0; i < 10; i++) {
                let task = {};
                
                switch(blockNum) {
                    case 1: // –§–°–£
                        const fsuType = Math.floor(Math.random() * 3) + 1;
                        if (fsuType === 1) { // –†–∞–∑–Ω–æ—Å—Ç—å –∫–≤–∞–¥—Ä–∞—Ç–æ–≤
                            const a = Math.floor(Math.random() * 5) + 1;
                            task.equation = `x¬≤ - ${a*a} = 0`;
                            task.solution = [-a, a];
                        } else if (fsuType === 2) { // –ö–≤–∞–¥—Ä–∞—Ç —Å—É–º–º—ã
                            const a = Math.floor(Math.random() * 3) + 1;
                            const b = Math.floor(Math.random() * 3) + 1;
                            task.equation = `x¬≤ + ${2*a*b}x + ${a*a*b*b} = 0`;
                            task.solution = [-a*b];
                        } else { // –†–∞–∑–Ω–æ—Å—Ç—å –∫—É–±–æ–≤
                            const a = Math.floor(Math.random() * 3) + 1;
                            task.equation = `x¬≥ - ${a*a*a} = 0`;
                            task.solution = [a];
                        }
                        break;
                        
                    case 2: // –ú–µ—Ç–æ–¥ –≥—Ä—É–ø–ø–∏—Ä–æ–≤–∫–∏
                        const roots = [
                            Math.floor(Math.random() * 7) - 3,
                            Math.floor(Math.random() * 7) - 3,
                            Math.floor(Math.random() * 7) - 3
                        ].filter(x => x !== 0);
                        
                        const sum = roots.reduce((a, b) => a + b, 0);
                        const sumPairs = roots[0]*roots[1] + roots[0]*roots[2] + roots[1]*roots[2];
                        const product = roots.reduce((a, b) => a * b, 1);
                        
                        task.equation = `x¬≥ ${sum >= 0 ? '-' : '+'} ${Math.abs(sum)}x¬≤ ${sumPairs >= 0 ? '+' : '-'} ${Math.abs(sumPairs)}x ${product >= 0 ? '-' : '+'} ${Math.abs(product)} = 0`;
                        task.solution = [...new Set(roots)].sort((a, b) => a - b);
                        break;
                        
                    case 3: // –¢–µ–æ—Ä–µ–º–∞ –ë–µ–∑—É
                        const root = Math.floor(Math.random() * 5) - 2;
                        if (root === 0) root = 1;
                        
                        const otherRoots = [
                            Math.floor(Math.random() * 5) - 2,
                            Math.floor(Math.random() * 5) - 2
                        ].filter(x => x !== 0 && x !== root);
                        
                        const allRoots = [root, ...otherRoots];
                        const uniqueRoots = [...new Set(allRoots)].sort((a, b) => a - b);
                        
                        task.equation = uniqueRoots.map(r => `(x ${r >= 0 ? '-' : '+'} ${Math.abs(r)})`).join(' * ') + ' = 0';
                        task.solution = uniqueRoots;
                        break;
                        
                    case 4: // –°—Ö–µ–º–∞ –ì–æ—Ä–Ω–µ—Ä–∞
                        const hornerRoot = Math.floor(Math.random() * 5) - 2;
                        if (hornerRoot === 0) hornerRoot = 1;
                        
                        const b = Math.floor(Math.random() * 5) - 2;
                        const c = -hornerRoot * b;
                        
                        task.equation = `x¬≥ ${b >= 0 ? '+' : '-'} ${Math.abs(b)}x¬≤ ${c >= 0 ? '+' : '-'} ${Math.abs(c)}x ${-hornerRoot*c >= 0 ? '+' : '-'} ${Math.abs(-hornerRoot*c)} = 0`;
                        task.solution = [hornerRoot, -c/b].sort((a, b) => a - b);
                        break;
                        
                    case 5: // –ó–∞–º–µ–Ω–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π
                        const subType = Math.floor(Math.random() * 2) + 1;
                        if (subType === 1) {
                            const b = [1, 4, 9][Math.floor(Math.random() * 3)];
                            task.equation = `x‚Å¥ - ${b}x¬≤ = 0`;
                            task.solution = [-Math.sqrt(b), 0, Math.sqrt(b)].sort((a, b) => a - b);
                        } else {
                            const k = Math.floor(Math.random() * 3) + 1;
                            const m = Math.floor(Math.random() * 3) + 1;
                            task.equation = `x¬≥ + ${k}x¬≤ + ${m}x = 0`;
                            const discriminant = k*k - 4*m;
                            if (discriminant >= 0) {
                                const x1 = (-k + Math.sqrt(discriminant)) / 2;
                                const x2 = (-k - Math.sqrt(discriminant)) / 2;
                                task.solution = [0, x1, x2].sort((a, b) => a - b);
                            } else {
                                task.solution = [0];
                            }
                        }
                        break;
                        
                    case 6: // –ë–∏–∫–≤–∞–¥—Ä–∞—Ç–Ω—ã–µ —É—Ä–∞–≤–Ω–µ–Ω–∏—è
                        const biquadType = Math.floor(Math.random() * 2) + 1;
                        if (biquadType === 1) {
                            const b = [5, 10, 13][Math.floor(Math.random() * 3)];
                            const c = [4, 9, 25][Math.floor(Math.random() * 3)];
                            task.equation = `x‚Å¥ - ${b}x¬≤ + ${c} = 0`;
                            const t1 = (b + Math.sqrt(b*b - 4*c)) / 2;
                            const t2 = (b - Math.sqrt(b*b - 4*c)) / 2;
                            const roots = [];
                            if (t1 >= 0) {
                                roots.push(-Math.sqrt(t1), Math.sqrt(t1));
                            }
                            if (t2 >= 0) {
                                roots.push(-Math.sqrt(t2), Math.sqrt(t2));
                            }
                            task.solution = [...new Set(roots)].sort((a, b) => a - b);
                        } else {
                            const a = Math.floor(Math.random() * 2) + 1;
                            const b = Math.floor(Math.random() * 3) + 1;
                            task.equation = `${a}x‚Å¥ - ${b*b*a}x¬≤ = 0`;
                            task.solution = [-b, 0, b].sort((a, b) => a - b);
                        }
                        break;
                }
                
                gameState.tasks.push(task);
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â—É—é –∑–∞–¥–∞—á—É
        function showTask() {
            if (gameState.currentTask >= gameState.tasks.length) {
                showResults();
                return;
            }
            
            const task = gameState.tasks[gameState.currentTask];
            document.getElementById('equation').textContent = task.equation;
            document.getElementById('answer-input').value = '';
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å—á–µ—Ç—á–∏–∫–∞ –∑–∞–¥–∞—á
            document.getElementById('task-counter').textContent = 
                `–ó–∞–¥–∞—á–∞ ${gameState.currentTask + 1} –∏–∑ ${gameState.tasks.length}`;
            
            // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–≥—Ä–µ—Å—Å-–±–∞—Ä–∞
            const progress = (gameState.currentTask / gameState.tasks.length) * 100;
            document.getElementById('progress-bar').style.width = `${progress}%`;
            document.getElementById('progress-percent').textContent = `${Math.round(progress)}%`;
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å –ø–æ–¥—Å–∫–∞–∑–∫—É
        function showHint() {
            document.getElementById('hint-content').textContent = gameState.blockHints[gameState.currentBlock];
            document.getElementById('hint-area').classList.remove('hidden');
        }

        // –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç–≤–µ—Ç
        function checkAnswer() {
            const task = gameState.tasks[gameState.currentTask];
            const userInput = document.getElementById('answer-input').value.trim();
            
            try {
                // –ü–∞—Ä—Å–∏–Ω–≥ –≤–≤–æ–¥–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
                const userAnswers = userInput.split(',')
                    .map(x => x.trim())
                    .filter(x => x !== '')
                    .map(x => {
                        // –ü—Ä–µ–æ–±—Ä–∞–∑–æ–≤–∞–Ω–∏–µ –¥—Ä–æ–±–µ–π –≤–∏–¥–∞ a/b
                        if (x.includes('/')) {
                            const [numerator, denominator] = x.split('/').map(Number);
                            return numerator / denominator;
                        }
                        return Number(x);
                    })
                    .sort((a, b) => a - b);
                
                // –ü—Ä–æ–≤–µ—Ä–∫–∞ –æ—Ç–≤–µ—Ç–∞
                const correctAnswers = task.solution.map(x => Number(x.toFixed(2)));
                const userAnswersRounded = userAnswers.map(x => Number(x.toFixed(2)));
                
                // –°—Ä–∞–≤–Ω–µ–Ω–∏–µ –º–∞—Å—Å–∏–≤–æ–≤
                const isCorrect = JSON.stringify(userAnswersRounded) === JSON.stringify(correctAnswers);
                
                if (isCorrect) {
                    gameState.score++;
                    showAlert('–ü—Ä–∞–≤–∏–ª—å–Ω–æ!', '–ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º, –≤–∞—à –æ—Ç–≤–µ—Ç –≤–µ—Ä–Ω—ã–π.', 'success');
                } else {
                    // –ü–æ–∏—Å–∫ —Ä–∞–∑–ª–∏—á–∏–π
                    const missing = correctAnswers.filter(x => !userAnswersRounded.includes(x));
                    const extra = userAnswersRounded.filter(x => !correctAnswers.includes(x));
                    
                    let message = '–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –æ—Ç–≤–µ—Ç.';
                    if (missing.length > 0) {
                        message += ` –ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –∫–æ—Ä–Ω–∏: ${missing.join(', ')}.`;
                    }
                    if (extra.length > 0) {
                        message += ` –õ–∏—à–Ω–∏–µ –∫–æ—Ä–Ω–∏: ${extra.join(', ')}.`;
                    }
                    
                    showAlert('–û—à–∏–±–∫–∞', message, 'error');
                }
                
                // –ü–µ—Ä–µ—Ö–æ–¥ –∫ —Å–ª–µ–¥—É—é—â–µ–π –∑–∞–¥–∞—á–µ
                gameState.currentTask++;
                setTimeout(showTask, 2000);
                
            } catch (e) {
                showAlert('–û—à–∏–±–∫–∞', '–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –≤–≤–µ–¥–∏—Ç–µ –∫–æ—Ä–Ω–∏ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (–Ω–∞–ø—Ä–∏–º–µ—Ä: 1, -2, 3.5, 1/2)', 'error');
            }
        }

        // –ü–æ–∫–∞–∑–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –±–ª–æ–∫–∞
        function showResults() {
            document.getElementById('task-block').classList.add('hidden');
            document.getElementById('results-block').classList.remove('hidden');
            
            const total = gameState.tasks.length;
            const percentage = (gameState.score / total) * 100;
            
            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
            document.getElementById('result-text').textContent = 
                `–í—ã —Ä–µ—à–∏–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ ${gameState.score} –∏–∑ ${total} –∑–∞–¥–∞—á`;
            document.getElementById('result-progress').style.width = `${percentage}%`;
            
            // –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –æ—Ü–µ–Ω–∫–∏ –∏ –∏–∫–æ–Ω–∫–∏
            let title, icon;
            if (percentage >= 80) {
                title = '–û—Ç–ª–∏—á–Ω—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç!';
                icon = 'ü•≥';
                document.getElementById('result-progress').classList.remove('bg-yellow-500', 'bg-green-500');
                document.getElementById('result-progress').classList.add('bg-green-500');
                document.getElementById('result-title').classList.remove('text-yellow-600', 'text-green-600');
                document.getElementById('result-title').classList.add('text-green-600');
            } else if (percentage >= 50) {
                title = '–•–æ—Ä–æ—à–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç!';
                icon = 'üòä';
                document.getElementById('result-progress').classList.remove('bg-yellow-500', 'bg-green-500');
                document.getElementById('result-progress').classList.add('bg-yellow-500');
                document.getElementById('result-title').classList.remove('text-yellow-600', 'text-green-600');
                document.getElementById('result-title').classList.add('text-yellow-600');
            } else {
                title = '–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –µ—â–µ —Ä–∞–∑!';
                icon = 'üòï';
                document.getElementById('result-progress').classList.remove('bg-yellow-500', 'bg-green-500');
                document.getElementById('result-progress').classList.add('bg-red-500');
                document.getElementById('result-title').classList.remove('text-yellow-600', 'text-green-600');
                document.getElementById('result-title').classList.add('text-red-600');
            }
            
            document.getElementById('result-title').textContent = title;
            document.getElementById('result-icon').textContent = icon;
        }

        // –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ–∫—É—â–∏–π –±–ª–æ–∫
        function restartBlock() {
            startBlock(gameState.currentBlock);
        }

        // –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–∫–∞–∑–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
        function showAlert(title, message, type) {
            const alertDiv = document.createElement('div');
            alertDiv.className = `fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-lg flex items-center ${
                type === 'success' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'
            }`;
            
            const icon = document.createElement('i');
            icon.className = `mr-3 text-xl ${
                type === 'success' ? 'fas fa-check-circle' : 'fas fa-exclamation-circle'
            }`;
            
            const contentDiv = document.createElement('div');
            const titleP = document.createElement('p');
            titleP.className = 'font-bold';
            titleP.textContent = title;
            
            const messageP = document.createElement('p');
            messageP.className = 'text-sm';
            messageP.textContent = message;
            
            contentDiv.appendChild(titleP);
            contentDiv.appendChild(messageP);
            
            alertDiv.appendChild(icon);
            alertDiv.appendChild(contentDiv);
            
            document.body.appendChild(alertDiv);
            
            setTimeout(() => {
                alertDiv.classList.add('opacity-0', 'transition-opacity', 'duration-500');
                setTimeout(() => alertDiv.remove(), 500);
            }, 3000);
        }
    </script>
</body>
</html>
